{"version":3,"sources":["Form.tsx"],"names":["Form","state","phoneNumber","setPhoneNumber","setLoginOTPVisible","setCountryCode","countryCode","loginOTPRequest","Context","loginOTPPayload","success","handleChangeText","text","isNaN","Number","handleCountrySelected","item","iso2","handleSubmit","Keyboard","dismiss","phone","isSubmitEnabled","length","phoneNumberLib","require","phoneUtil","PhoneNumberUtil","getInstance","currentCountry","phoneInfo","parse","isValidNumber","styles","containerForm","textInput","colors","white"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;AAEA,SAASA,IAAT,GAAgB;AACd,QAAM;AACJC,IAAAA,KADI;AAEJC,IAAAA,WAFI;AAGJC,IAAAA,cAHI;AAIJC,IAAAA,kBAJI;AAKJC,IAAAA,cALI;AAMJC,IAAAA,WANI;AAOJC,IAAAA;AAPI,MAQF,uBAAWC,gBAAX,CARJ;AAUA,wBAAU,MAAM;AAAA;;AACd,iCAAIP,KAAK,CAACQ,eAAV,kDAAI,sBAAuBC,OAA3B,EAAoC;AAClCN,MAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACD,KAHa,CAId;;AACD,GALD,EAKG,CAACH,KAAK,CAACQ,eAAP,CALH;;AAOA,QAAME,gBAAgB,GAAIC,IAAD,IAAkB;AACzC,QAAIC,KAAK,CAACC,MAAM,CAACF,IAAD,CAAP,CAAT,EAAyB;AACvB;AACD;;AAEDT,IAAAA,cAAc,CAACS,IAAD,CAAd;AACD,GAND;;AAQA,QAAMG,qBAAqB,GAAIC,IAAD,IAAmB;AAC/CX,IAAAA,cAAc,CAACW,IAAI,CAACC,IAAN,CAAd;AACD,GAFD;;AAIA,QAAMC,YAAY,GAAG,MAAM;AACzBC,0BAASC,OAAT;;AAEAb,IAAAA,eAAe,CAAC;AACdc,MAAAA,KAAK,EAAEnB,WADO;AAEdI,MAAAA,WAAW,EAAE,0BAAYA,WAAZ;AAFC,KAAD,CAAf;AAID,GAPD;;AASA,QAAMgB,eAAe,GAAG,MAAe;AACrC,QAAIpB,WAAW,CAACqB,MAAZ,IAAsB,CAA1B,EAA6B;AAC3B,YAAMC,cAAc,GAAGC,OAAO,CAAC,uBAAD,CAA9B;;AACA,YAAMC,SAAS,GAAGF,cAAc,CAACG,eAAf,CAA+BC,WAA/B,EAAlB;AAEA,YAAMC,cAAc,GAAG,yBAAWvB,WAAX,CAAvB;AACA,YAAMW,IAAI,GAAGY,cAAH,aAAGA,cAAH,uBAAGA,cAAc,CAAEZ,IAA7B;AAEA,YAAMa,SAAS,GAAGJ,SAAS,CAACK,KAAV,CAAgB7B,WAAhB,EAA6Be,IAA7B,CAAlB;AAEA,aAAOS,SAAS,CAACM,aAAV,CAAwBF,SAAxB,CAAP;AACD;;AAED,WAAO,KAAP;AACD,GAdD;;AAgBA,sBACE,6BAAC,iBAAD;AAAM,IAAA,KAAK,EAAEG,gBAAOC;AAApB,kBACE,6BAAC,sBAAD;AAAe,IAAA,UAAU,EAAEnB;AAA3B,IADF,eAEE,6BAAC,sBAAD;AACE,IAAA,KAAK,EAAEkB,gBAAOE,SADhB;AAEE,IAAA,YAAY,EAAC,WAFf;AAGE,IAAA,YAAY,EAAExB,gBAHhB;AAIE,IAAA,KAAK,EAAET,WAJT;AAKE,IAAA,WAAW,EAAC,cALd;AAME,IAAA,oBAAoB,EAAEkC,eAAOC,KAN/B;AAOE,IAAA,SAAS,EAAE;AAPb,IAFF,eAWE,6BAAC,eAAD;AAAQ,IAAA,OAAO,EAAEf,eAAe,EAAhC;AAAoC,IAAA,OAAO,EAAEJ;AAA7C,IAXF,CADF;AAeD;;eAEclB,I","sourcesContent":["import React, {useContext, useEffect} from 'react';\nimport {Keyboard, TextInput, View} from 'react-native';\nimport CountryPicker from './CountryPicker';\nimport Button from './Button';\nimport styles from './styles';\nimport {colors} from '../../themes';\nimport {Context} from '../../core/Context';\nimport {Country} from './Login.interface';\nimport {getCountry, getDialCode} from '../../helpers';\n\nfunction Form() {\n  const {\n    state,\n    phoneNumber,\n    setPhoneNumber,\n    setLoginOTPVisible,\n    setCountryCode,\n    countryCode,\n    loginOTPRequest\n  } = useContext(Context);\n\n  useEffect(() => {\n    if (state.loginOTPPayload?.success) {\n      setLoginOTPVisible(true);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state.loginOTPPayload]);\n\n  const handleChangeText = (text: string) => {\n    if (isNaN(Number(text))) {\n      return;\n    }\n\n    setPhoneNumber(text);\n  };\n\n  const handleCountrySelected = (item: Country) => {\n    setCountryCode(item.iso2);\n  };\n\n  const handleSubmit = () => {\n    Keyboard.dismiss();\n\n    loginOTPRequest({\n      phone: phoneNumber,\n      countryCode: getDialCode(countryCode)\n    });\n  };\n\n  const isSubmitEnabled = (): boolean => {\n    if (phoneNumber.length >= 9) {\n      const phoneNumberLib = require('google-libphonenumber');\n      const phoneUtil = phoneNumberLib.PhoneNumberUtil.getInstance();\n\n      const currentCountry = getCountry(countryCode);\n      const iso2 = currentCountry?.iso2;\n\n      const phoneInfo = phoneUtil.parse(phoneNumber, iso2);\n\n      return phoneUtil.isValidNumber(phoneInfo);\n    }\n\n    return false;\n  };\n\n  return (\n    <View style={styles.containerForm}>\n      <CountryPicker onSelected={handleCountrySelected} />\n      <TextInput\n        style={styles.textInput}\n        keyboardType=\"phone-pad\"\n        onChangeText={handleChangeText}\n        value={phoneNumber}\n        placeholder=\"Phone Number\"\n        placeholderTextColor={colors.white}\n        maxLength={15}\n      />\n      <Button enabled={isSubmitEnabled()} onPress={handleSubmit} />\n    </View>\n  );\n}\n\nexport default Form;\n"]}