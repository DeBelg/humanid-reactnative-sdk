{"version":3,"sources":["index.ts"],"names":["xhr","EventRegister","ON_ERROR","defaultError","e","success","code","message","data","catchErrorMessage","catchErrorMessageRequestOTP","postLoginOTP","params","response","emitEvent","postLogin","postWebLogin"],"mappings":"AAAA;AASA,OAAOA,GAAP,MAAgB,OAAhB;AACA,SAAQC,aAAR,EAAuBC,QAAvB,QAAsC,sBAAtC;;AAEA,MAAMC,YAAY,GAAIC,CAAD,KAAiC;AACpDC,EAAAA,OAAO,EAAE,KAD2C;AAEpDC,EAAAA,IAAI,EAAE,SAF8C;AAGpDC,EAAAA,OAAO,EAAG,4CAA2CH,CAAE,EAHH;AAIpDI,EAAAA,IAAI,EAAE;AAJ8C,CAAjC,CAArB;;AAOA,MAAMC,iBAAiB,GAAIL,CAAD,IAAY;AACpC,SAAO,CAAAA,CAAC,SAAD,IAAAA,CAAC,WAAD,YAAAA,CAAC,CAAEG,OAAH,KAAcH,CAArB;AACD,CAFD;;AAIA,MAAMM,2BAA2B,GAAIN,CAAD,IAAY;AAC9C,MAAI,CAAAA,CAAC,SAAD,IAAAA,CAAC,WAAD,YAAAA,CAAC,CAAEE,IAAH,MAAY,KAAhB,EAAuB,OAAO,4DAAP;AAEvB,SAAO,CAAAF,CAAC,SAAD,IAAAA,CAAC,WAAD,YAAAA,CAAC,CAAEG,OAAH,KAAcH,CAArB;AACD,CAJD;;AAMA,OAAO,eAAeO,YAAf,CACLC,MADK,EAEuC;AAC5C,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMb,GAAG,CACxB,0BADwB,EAExBY,MAFwB,CAA1B;AAKA,WAAO,EAAC,GAAGC;AAAJ,KAAP;AACD,GAPD,CAOE,OAAOT,CAAP,EAAU;AACVH,IAAAA,aAAa,CAACa,SAAd,CAAwBZ,QAAxB,EAAkCQ,2BAA2B,CAACN,CAAD,CAA7D;AACA,WAAOD,YAAY,CAACO,2BAA2B,CAACN,CAAD,CAA5B,CAAnB;AACD;AACF;AAED,OAAO,eAAeW,SAAf,CACLH,MADK,EAEoC;AACzC,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMb,GAAG,CACxB,cADwB,EAExBY,MAFwB,CAA1B;AAKA,WAAO,EAAC,GAAGC;AAAJ,KAAP;AACD,GAPD,CAOE,OAAOT,CAAP,EAAU;AACVH,IAAAA,aAAa,CAACa,SAAd,CAAwBZ,QAAxB,EAAkCO,iBAAiB,CAACL,CAAD,CAAnD;AACA,WAAOD,YAAY,CAAEM,iBAAiB,CAACL,CAAD,CAAnB,CAAnB;AACD;AACF;AAGD,OAAO,eAAeY,YAAf,CACHJ,MADG,EAEuC;AAC5C,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMb,GAAG,CACtB,kBADsB,EAEtBY,MAFsB,CAA1B;AAKA,WAAO,EAAC,GAAGC;AAAJ,KAAP;AACD,GAPD,CAOE,OAAOT,CAAP,EAAU;AACVH,IAAAA,aAAa,CAACa,SAAd,CAAwBZ,QAAxB,EAAkCO,iBAAiB,CAACL,CAAD,CAAnD;AACA,WAAOD,YAAY,CAACM,iBAAiB,CAACL,CAAD,CAAlB,CAAnB;AACD;AACF","sourcesContent":["/* eslint-disable prettier/prettier */\nimport {\n  LoginOTPRequest,\n  LoginResponse,\n  LoginRequest,\n  LoginOTPResponse,\n  WebLoginRequest, WebLoginResponse\n} from '../models/models.interface';\nimport {NetworkResponse} from './network.interface';\nimport xhr from './xhr';\nimport {EventRegister, ON_ERROR} from '../core/eventManager';\n\nconst defaultError = (e: string): NetworkResponse => ({\n  success: false,\n  code: 'FAILURE',\n  message: `Something wrong while requesting network ${e}`,\n  data: null\n});\n\nconst catchErrorMessage = (e: any) => {\n  return e?.message || e;\n};\n\nconst catchErrorMessageRequestOTP = (e: any) => {\n  if (e?.code !== '401') return 'Unable to request otp at this time. Please try again later';\n\n  return e?.message || e;\n};\n\nexport async function postLoginOTP(\n  params: LoginOTPRequest\n): Promise<NetworkResponse<LoginOTPResponse>> {\n  try {\n    const response = await xhr<LoginOTPRequest, LoginOTPResponse>(\n      '/users/login/request-otp',\n      params\n    );\n\n    return {...response};\n  } catch (e) {\n    EventRegister.emitEvent(ON_ERROR, catchErrorMessageRequestOTP(e));\n    return defaultError(catchErrorMessageRequestOTP(e));\n  }\n}\n\nexport async function postLogin(\n  params: LoginRequest\n): Promise<NetworkResponse<LoginResponse>> {\n  try {\n    const response = await xhr<LoginRequest, LoginResponse>(\n      '/users/login',\n      params\n    );\n\n    return {...response};\n  } catch (e) {\n    EventRegister.emitEvent(ON_ERROR, catchErrorMessage(e));\n    return defaultError((catchErrorMessage(e)));\n  }\n}\n\n\nexport async function postWebLogin(\n    params: WebLoginRequest,\n): Promise<NetworkResponse<WebLoginResponse>> {\n  try {\n    const response = await xhr<WebLoginRequest, WebLoginResponse>(\n        '/users/web-login',\n        params,\n    );\n\n    return {...response};\n  } catch (e) {\n    EventRegister.emitEvent(ON_ERROR, catchErrorMessage(e));\n    return defaultError(catchErrorMessage(e));\n  }\n}\n\n"]}